#center_column
	%video#player.video-js.vjs-default-skin{controls: "", "data-setup" => '{"techOrder": ["html5","flash"]}', preload: "auto", height: "360", width: "640"}
		/ %source{src: ViddlRb.get_urls("#{@remote.playlist[@remote.selection]["url"]}")[0], type: "video/mp4"}

	%canvas#drawing-surface{height: "330", width: "640"}
	- if @user || @remote.admin_only == false
		%button#clear Clear Screen
		%input#color{name: "linecolor", type: "color"}/

	#video_info.panel.panel-default
		.panel-heading
			/ %h3.panel-title #{@remote.title}
			%h3.panel-title Sample Video Title
		.panel-body
			%p
				/ #{@remote.description}
				Sample Video Description
			%p
				%a{href: @remote.url}
					Watch video on its own site.
			- if @remote.admin_only == false || @remote_user
				%span.label.label-success You are allowed to use this remote!
		%ul#chat.list-group
			%li#chat_title.list-group-item
				= form_for :remote, :url => { :controller => 'remotes', :action => 'chat' }, remote: true do |f|
					.input-group.input-group-sm
						= hidden_field_tag :username, @username
						= text_field_tag :chat_message, "", :class => 'form-control', placeholder: 'enter a chat message here...', html: {:autocomplete => "off"}
						%span.input-group-btn
							= submit_tag "Send", class: "btn btn-success"
			%li#chat_messages.list-group-item
				%table#chat_table.table
					%tbody#chat_table_body
						%tr
							%td.small.grey-text Welcome to Fremote chat.  If you would like a dedicated username for the chat, sign up for an account!

		%ul.list-group
			%li.list-group-item
				Playlist
			%li.list-group-item
				%ol#playlist.sortable.list

	- if current_user
		#owner_controls.panel.panel-success
			.panel-heading
				%h3.panel-title Remote Owner Controls
			.panel-body
				= form_for(@remote, remote: true, :html => {:id => "owner_controls_form"}) do |f|
					.checkbox
						%label
							Owner-only Controls #{f.check_box :admin_only}

:javascript

		$('#owner_controls_form').on('click', function(){
			$('#owner_controls_form').submit()
		})

	var Remote = #{@remote.to_json}
	var user = '#{@identifier}'

	$('body .sortable').sortable().bind('sortupdate', function(e, ui) {
		console.log('sorted')
		console.log(ui)
		console.log(ui.item.index())
		console.log(ui.oldindex)
		$.ajax({
			url: "/remotes/" + Remote.remote_id + "/playlist",
			type: "POST",
			data: {old_position: ui.oldindex, new_position: ui.item.index(), _method: "patch"}
		})
	})
